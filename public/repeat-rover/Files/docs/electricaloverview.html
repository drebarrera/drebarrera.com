<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol{margin:0;padding:0}table td,table th{padding:0}.c5{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:117pt;border-top-color:#000000;border-bottom-style:solid}.c16{-webkit-text-decoration-skip:none;color:#0000ff;font-weight:400;text-decoration:underline;vertical-align:baseline;text-decoration-skip-ink:none;font-family:"Times New Roman";font-style:normal}.c3{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Times New Roman";font-style:normal}.c2{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Times New Roman";font-style:normal}.c10{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Times New Roman";font-style:normal}.c12{color:#ff0000;font-weight:400;text-decoration:none;vertical-align:baseline;font-family:"Times New Roman";font-style:italic}.c13{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-family:"Times New Roman";font-style:italic}.c7{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:center}.c15{margin-left:5pt;border-spacing:0;border-collapse:collapse;margin-right:auto}.c6{padding-top:12pt;padding-bottom:12pt;line-height:1.0;text-align:left}.c0{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c1{orphans:2;widows:2;height:12pt}.c14{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c11{color:inherit;text-decoration:inherit}.c4{orphans:2;widows:2}.c17{font-weight:400}.c8{height:0pt}.c9{font-size:12pt}.title{padding-top:0pt;color:#000000;font-weight:700;font-size:14pt;padding-bottom:0pt;font-family:"Times New Roman";line-height:1.0;orphans:2;widows:2;text-align:center}.subtitle{padding-top:18pt;color:#666666;font-size:24pt;padding-bottom:4pt;font-family:"Georgia";line-height:1.0;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:12pt;font-family:"Times New Roman"}p{margin:0;color:#000000;font-size:12pt;font-family:"Times New Roman"}h1{padding-top:0pt;color:#000000;font-size:12pt;padding-bottom:0pt;font-family:"Times New Roman";line-height:1.0;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-weight:700;font-size:18pt;padding-bottom:4pt;font-family:"Times New Roman";line-height:1.0;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:14pt;color:#000000;font-weight:700;font-size:14pt;padding-bottom:4pt;font-family:"Times New Roman";line-height:1.0;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:12pt;color:#000000;font-weight:700;font-size:12pt;padding-bottom:2pt;font-family:"Times New Roman";line-height:1.0;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:11pt;color:#000000;font-weight:700;font-size:11pt;padding-bottom:2pt;font-family:"Times New Roman";line-height:1.0;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:10pt;color:#000000;font-weight:700;font-size:10pt;padding-bottom:2pt;font-family:"Times New Roman";line-height:1.0;page-break-after:avoid;orphans:2;widows:2;text-align:left}</style></head><body class="c14 doc-content"><div><p class="c0 c4"><span class="c2">ECE 477: Digital Systems Senior Design&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c9 c13">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">Last Modified: </span><span>10-08</span><span class="c2">-20</span><span>22</span></p></div><p class="c7 c4 title"><span class="c10">Electrical Overview</span></p><p class="c7 c1 title"><span class="c10"></span></p><p class="c0 c4 title"><span class="c3">Year: _2022_ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Semester: _Fall___&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Team: _16_ Project:__Repeat Rover________________</span></p><p class="c0 c4 title"><span class="c9">Creation Date: __9/13/2022_________________ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Last Modified: </span><span class="c9 c17">October 8, 2022</span></p><p class="c0 c4 title"><span class="c3">Author: &nbsp;__Christine Fang___________________&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Email: __fang245@purdue.edu_________</span></p><p class="c0 c1 title"><span class="c3"></span></p><p class="c0 c4 title"><span class="c3">1.0 Electrical Overview</span></p><p class="c0 c1 title"><span class="c3"></span></p><p class="c0 c4"><span class="c2">Our project will utilize a 32-bit, 64-pin Microcontroller, which will be handling the the user&rsquo;s inputs and executing the output commands, as well as interacting and interfacing between all of the peripherals used. The user&rsquo;s mobile device will be able to communicate with the rover wirelessly using bluetooth to set a desired path. The Repeat Rover will track the path using wheel speed sensors for the speed and distance and a magnetometer for vehicle bearing. The information is then computed and saved in an SD card, then ultimately the data collected is sent to the motor controller for output.</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0 c4"><span class="c2">The data read by the magnetometer and wheel speed sensor is in analog, so to translate the data to digital, the microcontroller includes 2 fast analog-to-digital converters with resolution between 12 and 6 bit.[1]</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0 c4 title"><span class="c9">2.0 Electrical Considerations</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0 c4"><span class="c3">2.1 Power</span></p><p class="c0 c4"><span class="c2">For our project, we will be using battery power since our rover must be portable. The microcontroller we have chosen (nrf52832) has a voltage range of 1.6V - 3.6V.[1] Most of the parts we need require around 3.3V, so the microcontroller should be enough to supply this. The wheel speed sensor and the SD card reader requires 3.3V and the magnetometer requires 3V. The motors on the remote control car requires 3.6V which is still within the range. The motor driver will need 5V which can be supplied by the the microcontroller</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0 c4"><span class="c3">2.2 Frequency</span></p><p class="c0 c4"><span class="c2">The operating frequency for our project will be determined by the microcontroller. The microcontroller we have operates at a maximum frequency of 72MHz. When the rover is collecting data, we would like to operate at the highest frequency so we will use up to the maximum frequency from the microcontroller, but since we are using battery power to power our rover, we may need to lower the operating frequency to about 50MHz to preserve the battery as much as possible. Our project does not require too much power and each component requires about 3.3-3.6 V to operate. </span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0 c4"><span class="c2">Below are the maximum current drawn from each of the major components along with the maximum voltage and power specifications:</span></p><p class="c0 c1"><span class="c2"></span></p><a id="t.c99cb459064359437fcbc0ea1d175fbf66db2d48"></a><a id="t.0"></a><table class="c15"><tr class="c8"><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c3">Component</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c3">Voltage</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c3">Current</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c3">Power</span></p></td></tr><tr class="c8"><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c2">Magnetometer[2]</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c2">3.6V</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c2">450uA</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c2">low</span></p></td></tr><tr class="c8"><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c2">Hall Effect Sensors[3]</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c2">40V</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c2">30mA</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c2">low</span></p></td></tr><tr class="c8"><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c2">SD card reader</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c2">3.3V</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c2">25MHz</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c2">330mW</span></p></td></tr><tr class="c8"><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c2">Motor</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c2">5V</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c2">50A</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c2">55mW</span></p></td></tr><tr class="c8"><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c2">Motor Driver</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c2">36V</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c2">2A</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c0"><span class="c2">2075mW</span></p></td></tr></table><p class="c0 c1"><span class="c2"></span></p><p class="c0 c1 title"><span class="c2"></span></p><p class="c0 c4 title"><span class="c3">3.0 Interface Considerations</span></p><p class="c0 c1 title"><span class="c12 c9"></span></p><p class="c0 c4 title"><span class="c2">The two interfaces we will be using are SPI and I2C. We will use SPI to store and read data from the SD card, and I2C is used for the magnetometer. The wheel speed sensors and the motor driver will use multiple GPIO pins. </span></p><p class="c0 c4"><span class="c2"><br>The SPI will require one clock at a rate between 0 and 25MHz. SPI supports 2-way communication between the microcontroller and the SD card, and can do so in very high speeds. For the SPI protocol, we would need the clock, a chip select pin, and also MISO and MOSI to read in and store the data. The SD card maximum frequency is 25MHz, but we will not be using it all the time, mainly when we are writing to the card and when the wheel is interacting with the Hall Effect sensors. </span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0 c4"><span class="c2">For the I2C protocol, we will need 2 wires for the SDA and SCL. The magnetometer will be in FAST mode at the maximum frequency rate which is 400KHz. The address for the magnetometer for communication is 7-bits and is addressed to the master. SCL and SDA are 8-bit registers along with GND and VCC.</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0 c4 title"><span class="c3">4.0 Sources Cited:</span></p><p class="c4 c6 title" id="h.r3nn7yfzsnnk"><span class="c2">[1]&ldquo;ARM&reg; cortex&reg;-M4 32B MCU+FPU, 64KB flash, 16KB ... - stmicroelectronics.&rdquo; [Online]. Available: https://www.st.com/resource/en/datasheet/stm32f328c8.pdf. [Accessed: 14-Sep-2022].</span></p><p class="c6 c4 title" id="h.lhvl04qyxu4j"><span class="c2">[2] &ldquo;DRV5033 digital-Omnipolar-Switch Hall Effect Sensor Datasheet (rev. G).&rdquo; [Online]. Available: https://www.ti.com/lit/ds/symlink/drv5033.pdf. [Accessed: 08-Oct-2022]. </span></p><p class="c6 c4 title" id="h.wkpmijtgk99q"><span class="c2">[3]&ldquo;&plusmn;8 Gauss, high performance H 3-axis magnetic sensor - digi-key.&rdquo; [Online]. Available: https://media.digikey.com/pdf/Data%20Sheets/MEMSIC%20PDFs/MMC5983MA_RevA_4-3-19.pdf. [Accessed: 16-Sep-2022]. </span></p><p class="c6 c1 title" id="h.rps02mpx7zw"><span class="c2"></span></p><p class="c0 c1 title"><span class="c3"></span></p><p class="c7 c1 title"><span class="c3"></span></p><p class="c7 c1 title"><span class="c3"></span></p><p class="c1 c7 title"><span class="c3"></span></p><p class="c7 c1 title"><span class="c3"></span></p><p class="c7 c1 title"><span class="c3"></span></p><p class="c7 c1 title"><span class="c3"></span></p><p class="c7 c1 title"><span class="c3"></span></p><p class="c0 c1 title"><span class="c3"></span></p><p class="c0 c4 title"><span class="c9">Appendix 1: System Block Diagram</span></p><p class="c7 c1 title"><span class="c2"></span></p><p class="c0 c1 title"><span class="c9 c12"></span></p><p class="c7 c4 title"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 468.00px;"><img alt="" src="images3/image1.webp" style="width: 624.00px; height: 468.00px; margin-left: -0.00px; margin-top: -0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><div><p class="c0 c4"><span class="c9 c16"><a class="c11" href="https://www.google.com/url?q=https://engineering.purdue.edu/ece477&amp;sa=D&amp;source=editors&amp;ust=1679056159728219&amp;usg=AOvVaw2XA14wrofndNi2jBXrNgD4">https://engineering.purdue.edu/ece477</a></span><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Page </span><span class="c2">&nbsp;of </span></p><p class="c0 c1"><span class="c2"></span></p></div></body></html>